#!/usr/bin/env bash

DOT="$HOME/.dotfiles"
ST3="$HOME/Library/Application Support/Sublime Text 3/Packages"

echo "Installing Sublime Text"
brew cask install sublime-text3

if [ ! -d "$ST3/Package Control" ]; then
  echo "Installing Sublime Text 3 Package Control"
  git clone https://github.com/wbond/sublime_package_control.git "$ST3/Package Control"
fi

if [ ! -d "$ST3/Theme - Spacegray" ]; then
  echo "Installing Customized Spacegray"
  git clone https://github.com/pongstr/spacegray.git "$ST3/Theme - Spacegray"
fi

echo "Copy Sublime Text 3 Preferences, Keymap and Package Control + Packages"
cp -f "$DOT/editors/config/Preferences.sublime-settings" "$ST3/User/Preferences.sublime-settings"
cp -f "$DOT/editors/config/Default (OSX).sublime-keymap" "$ST3/User/Default (OSX).sublime-keymap"
cp -f "$DOT/editors/config/Package Control.sublime-settings" "$ST3/User/Package Control.sublime-settings"

echo "Reload Sublime Text 3 Settings"
open -a /Applications/Sublime\ Text.app
killall Sublime\ Text
